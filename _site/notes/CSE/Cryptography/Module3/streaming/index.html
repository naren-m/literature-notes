<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cryptography Module3 Streaming | literature-notes</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Cryptography Module3 Streaming" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="literature-notes" />
<meta property="og:description" content="literature-notes" />
<link rel="canonical" href="http://localhost:4000/notes/CSE/Cryptography/Module3/streaming/" />
<meta property="og:url" content="http://localhost:4000/notes/CSE/Cryptography/Module3/streaming/" />
<meta property="og:site_name" content="literature-notes" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cryptography Module3 Streaming" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"literature-notes","headline":"Cryptography Module3 Streaming","url":"http://localhost:4000/notes/CSE/Cryptography/Module3/streaming/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=b227b5edf8ac0ee1b1e0ee4602e5ba68e04a8bf1">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">literature-notes</a></h1>
      

      <h1 id="cryptography-module3-streaming">Cryptography Module3 Streaming</h1>

<p>[[Cryptography]]</p>

<p><img src="https://cloud.githubusercontent.com/assets/173412/10886352/ad566232-814f-11e5-9cd0-aa101788c117.png" alt="cobra logo" /></p>

<p>Cobra is both a library for creating powerful modern CLI applications as well as a program to generate applications and command files.</p>

<p>Many of the most widely used Go projects are built using Cobra including:</p>

<ul>
  <li><a href="http://kubernetes.io/">Kubernetes</a></li>
  <li><a href="http://gohugo.io">Hugo</a></li>
  <li><a href="https://github.com/coreos/rkt">rkt</a></li>
  <li><a href="https://github.com/coreos/etcd">etcd</a></li>
  <li><a href="https://github.com/docker/docker">Docker</a></li>
  <li><a href="https://github.com/docker/distribution">Docker (distribution)</a></li>
  <li><a href="https://www.openshift.com/">OpenShift</a></li>
  <li><a href="https://github.com/derekparker/delve">Delve</a></li>
  <li><a href="http://www.gopherjs.org/">GopherJS</a></li>
  <li><a href="http://www.cockroachlabs.com/">CockroachDB</a></li>
  <li><a href="http://www.blevesearch.com/">Bleve</a></li>
  <li><a href="http://www.projectatomic.io/">ProjectAtomic (enterprise)</a></li>
  <li><a href="https://parse.com/">Parse (CLI)</a></li>
  <li><a href="https://github.com/giantswarm/cli">GiantSwarm’s swarm</a></li>
  <li><a href="https://github.com/nanobox-io/nanobox">Nanobox</a>/<a href="https://github.com/nanopack">Nanopack</a></li>
</ul>

<p><a href="https://travis-ci.org/spf13/cobra"><img src="https://travis-ci.org/spf13/cobra.svg" alt="Build Status" title="Travis CI status" /></a>
<a href="https://circleci.com/gh/spf13/cobra"><img src="https://circleci.com/gh/spf13/cobra.png?circle-token=:circle-token" alt="CircleCI status" title="CircleCI status" /></a>
<a href="https://godoc.org/github.com/spf13/cobra"><img src="https://godoc.org/github.com/spf13/cobra?status.svg" alt="GoDoc" /></a></p>

<p><img src="https://cloud.githubusercontent.com/assets/173412/10911369/84832a8e-8212-11e5-9f82-cc96660a4794.gif" alt="cobra" /></p>

<h2 id="overview">Overview</h2>

<p>Cobra is a library providing a simple interface to create powerful modern CLI
interfaces similar to git &amp; go tools.</p>

<p>Cobra is also an application that will generate your application scaffolding to rapidly
develop a Cobra-based application.</p>

<p>Cobra provides:</p>

<ul>
  <li>Easy subcommand-based CLIs: <code class="language-plaintext highlighter-rouge">app server</code>, <code class="language-plaintext highlighter-rouge">app fetch</code>, etc.</li>
  <li>Fully POSIX-compliant flags (including short &amp; long versions)</li>
  <li>Nested subcommands</li>
  <li>Global, local and cascading flags</li>
  <li>Easy generation of applications &amp; commands with <code class="language-plaintext highlighter-rouge">cobra create appname</code> &amp; <code class="language-plaintext highlighter-rouge">cobra add cmdname</code></li>
  <li>Intelligent suggestions (<code class="language-plaintext highlighter-rouge">app srver</code>… did you mean <code class="language-plaintext highlighter-rouge">app server</code>?)</li>
  <li>Automatic help generation for commands and flags</li>
  <li>Automatic detailed help for <code class="language-plaintext highlighter-rouge">app help [command]</code></li>
  <li>Automatic help flag recognition of <code class="language-plaintext highlighter-rouge">-h</code>, <code class="language-plaintext highlighter-rouge">--help</code>, etc.</li>
  <li>Automatically generated bash autocomplete for your application</li>
  <li>Automatically generated man pages for your application</li>
  <li>Command aliases so you can change things without breaking them</li>
  <li>The flexibilty to define your own help, usage, etc.</li>
  <li>Optional tight integration with <a href="http://github.com/spf13/viper">viper</a> for 12-factor apps</li>
</ul>

<p>Cobra has an exceptionally clean interface and simple design without needless
constructors or initialization methods.</p>

<p>Applications built with Cobra commands are designed to be as user-friendly as
possible. Flags can be placed before or after the command (as long as a
confusing space isn’t provided). Both short and long flags can be used. A
command need not even be fully typed.  Help is automatically generated and
available for the application or for a specific command using either the help
command or the <code class="language-plaintext highlighter-rouge">--help</code> flag.</p>

<h1 id="concepts">Concepts</h1>

<p>Cobra is built on a structure of commands, arguments &amp; flags.</p>

<p><strong>Commands</strong> represent actions, <strong>Args</strong> are things and <strong>Flags</strong> are modifiers for those actions.</p>

<p>The best applications will read like sentences when used. Users will know how
to use the application because they will natively understand how to use it.</p>

<p>The pattern to follow is
<code class="language-plaintext highlighter-rouge">APPNAME VERB NOUN --ADJECTIVE.</code>
    or
<code class="language-plaintext highlighter-rouge">APPNAME COMMAND ARG --FLAG</code></p>

<p>A few good real world examples may better illustrate this point.</p>

<p>In the following example, ‘server’ is a command, and ‘port’ is a flag:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; hugo server --port=1313
</code></pre></div></div>

<p>In this command we are telling Git to clone the url bare.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; git clone URL --bare
</code></pre></div></div>

<h2 id="commands">Commands</h2>

<p>Command is the central point of the application. Each interaction that
the application supports will be contained in a Command. A command can
have children commands and optionally run an action.</p>

<p>In the example above, ‘server’ is the command.</p>

<p>A Command has the following structure:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">Command</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">Use</span> <span class="kt">string</span> <span class="c">// The one-line usage message.</span>
    <span class="n">Short</span> <span class="kt">string</span> <span class="c">// The short description shown in the 'help' output.</span>
    <span class="n">Long</span> <span class="kt">string</span> <span class="c">// The long message shown in the 'help &lt;this-command&gt;' output.</span>
    <span class="n">Run</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="c">// Run runs the command.</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="flags">Flags</h2>

<p>A Flag is a way to modify the behavior of a command. Cobra supports
fully POSIX-compliant flags as well as the Go <a href="https://golang.org/pkg/flag/">flag package</a>.
A Cobra command can define flags that persist through to children commands
and flags that are only available to that command.</p>

<p>In the example above, ‘port’ is the flag.</p>

<p>Flag functionality is provided by the <a href="https://github.com/ogier/pflag">pflag
library</a>, a fork of the flag standard library
which maintains the same interface while adding POSIX compliance.</p>

<h2 id="usage">Usage</h2>

<p>Cobra works by creating a set of commands and then organizing them into a tree.
The tree defines the structure of the application.</p>

<p>Once each command is defined with its corresponding flags, then the
tree is assigned to the commander which is finally executed.</p>

<h1 id="installing">Installing</h1>

<p>Using Cobra is easy. First, use <code class="language-plaintext highlighter-rouge">go get</code> to install the latest version
of the library. This command will install the <code class="language-plaintext highlighter-rouge">cobra</code> generator executible
along with the library:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; go get -v github.com/spf13/cobra/cobra
</code></pre></div></div>

<p>Next, include Cobra in your application:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="s">"github.com/spf13/cobra"</span>
</code></pre></div></div>

<h1 id="getting-started">Getting Started</h1>

<p>While you are welcome to provide your own organization, typically a Cobra based
application will follow the following organizational structure.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ▾ appName/
    ▾ cmd/
        add.go
        your.go
        commands.go
        here.go
      main.go
</code></pre></div></div>

<p>In a Cobra app, typically the main.go file is very bare. It serves, one purpose, to initialize Cobra.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
 <span class="s">"fmt"</span>
 <span class="s">"os"</span>

 <span class="s">"{pathToYourApp}/cmd"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">RootCmd</span><span class="o">.</span><span class="n">Execute</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="n">os</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="using-the-cobra-generator">Using the Cobra Generator</h2>

<p>Cobra provides its own program that will create your application and add any
commands you want. It’s the easiest way to incorporate Cobra into your application.</p>

<p>In order to use the cobra command, compile it using the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; go install github.com/spf13/cobra/cobra
</code></pre></div></div>

<p>This will create the cobra executable under your go path bin directory!</p>

<h3 id="cobra-init">cobra init</h3>

<p>The <code class="language-plaintext highlighter-rouge">cobra init [yourApp]</code> command will create your initial application code
for you. It is a very powerful application that will populate your program with
the right structure so you can immediately enjoy all the benefits of Cobra. It
will also automatically apply the license you specify to your application.</p>

<p>Cobra init is pretty smart. You can provide it a full path, or simply a path
similar to what is expected in the import.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobra init github.com/spf13/newAppName
</code></pre></div></div>

<h3 id="cobra-add">cobra add</h3>

<p>Once an application is initialized Cobra can create additional commands for you.
Let’s say you created an app and you wanted the following commands for it:</p>

<ul>
  <li>app serve</li>
  <li>app config</li>
  <li>app config create</li>
</ul>

<p>In your project directory (where your main.go file is) you would run the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobra add serve
cobra add config
cobra add create -p 'configCmd'
</code></pre></div></div>

<p>Once you have run these three commands you would have an app structure that would look like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ▾ app/
    ▾ cmd/
        serve.go
        config.go
        create.go
      main.go
</code></pre></div></div>

<p>at this point you can run <code class="language-plaintext highlighter-rouge">go run main.go</code> and it would run your app. <code class="language-plaintext highlighter-rouge">go run
main.go serve</code>, <code class="language-plaintext highlighter-rouge">go run main.go config</code>, <code class="language-plaintext highlighter-rouge">go run main.go config create</code> along
with <code class="language-plaintext highlighter-rouge">go run main.go help serve</code>, etc would all work.</p>

<p>Obviously you haven’t added your own code to these yet, the commands are ready
for you to give them their tasks. Have fun.</p>

<h3 id="configuring-the-cobra-generator">Configuring the cobra generator</h3>

<p>The cobra generator will be easier to use if you provide a simple configuration
file which will help you eliminate providing a bunch of repeated information in
flags over and over.</p>

<p>An example ~/.cobra.yaml file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">author</span><span class="pi">:</span> <span class="s">Steve Francia &lt;spf@spf13.com&gt;</span>
<span class="na">license</span><span class="pi">:</span> <span class="s">MIT</span>
</code></pre></div></div>

<p>You can specify no license by setting <code class="language-plaintext highlighter-rouge">license</code> to <code class="language-plaintext highlighter-rouge">none</code> or you can specify
a custom license:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">license</span><span class="pi">:</span>
  <span class="na">header</span><span class="pi">:</span> <span class="s">This file is part of .</span>
  <span class="na">text</span><span class="pi">:</span> <span class="pi">|</span>
    

    <span class="s">This is my license. There are many like it, but this one is mine.</span>
    <span class="s">My license is my best friend. It is my life. I must master it as I must</span>
    <span class="s">master my life.  </span>
</code></pre></div></div>

<h2 id="manually-implementing-cobra">Manually implementing Cobra</h2>

<p>To manually implement cobra you need to create a bare main.go file and a RootCmd file.
You will optionally provide additional commands as you see fit.</p>

<h3 id="create-the-root-command">Create the root command</h3>

<p>The root command represents your binary itself.</p>

<h4 id="manually-create-rootcmd">Manually create rootCmd</h4>

<p>Cobra doesn’t require any special constructors. Simply create your commands.</p>

<p>Ideally you place this in app/cmd/root.go:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="n">RootCmd</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
 <span class="n">Use</span><span class="o">:</span>   <span class="s">"hugo"</span><span class="p">,</span>
 <span class="n">Short</span><span class="o">:</span> <span class="s">"Hugo is a very fast static site generator"</span><span class="p">,</span>
 <span class="n">Long</span><span class="o">:</span> <span class="s">`A Fast and Flexible Static Site Generator built with
                love by spf13 and friends in Go.
                Complete documentation is available at http://hugo.spf13.com`</span><span class="p">,</span>
 <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="c">// Do Stuff Here</span>
 <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You will additionally define flags and handle configuration in your init() function.</p>

<p>for example cmd/root.go:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
 <span class="n">cobra</span><span class="o">.</span><span class="n">OnInitialize</span><span class="p">(</span><span class="n">initConfig</span><span class="p">)</span>
 <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cfgFile</span><span class="p">,</span> <span class="s">"config"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="s">"config file (default is $HOME/.cobra.yaml)"</span><span class="p">)</span>
 <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">StringVarP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">projectBase</span><span class="p">,</span> <span class="s">"projectbase"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="s">"base project directory eg. github.com/spf13/"</span><span class="p">)</span>
 <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">StringP</span><span class="p">(</span><span class="s">"author"</span><span class="p">,</span> <span class="s">"a"</span><span class="p">,</span> <span class="s">"YOUR NAME"</span><span class="p">,</span> <span class="s">"Author name for copyright attribution"</span><span class="p">)</span>
 <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">StringVarP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">userLicense</span><span class="p">,</span> <span class="s">"license"</span><span class="p">,</span> <span class="s">"l"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="s">"Name of license for the project (can provide `licensetext` in config)"</span><span class="p">)</span>
 <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">Bool</span><span class="p">(</span><span class="s">"viper"</span><span class="p">,</span> <span class="no">true</span><span class="p">,</span> <span class="s">"Use Viper for configuration"</span><span class="p">)</span>
 <span class="n">viper</span><span class="o">.</span><span class="n">BindPFlag</span><span class="p">(</span><span class="s">"author"</span><span class="p">,</span> <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">Lookup</span><span class="p">(</span><span class="s">"author"</span><span class="p">))</span>
 <span class="n">viper</span><span class="o">.</span><span class="n">BindPFlag</span><span class="p">(</span><span class="s">"projectbase"</span><span class="p">,</span> <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">Lookup</span><span class="p">(</span><span class="s">"projectbase"</span><span class="p">))</span>
 <span class="n">viper</span><span class="o">.</span><span class="n">BindPFlag</span><span class="p">(</span><span class="s">"useViper"</span><span class="p">,</span> <span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">Lookup</span><span class="p">(</span><span class="s">"viper"</span><span class="p">))</span>
 <span class="n">viper</span><span class="o">.</span><span class="n">SetDefault</span><span class="p">(</span><span class="s">"author"</span><span class="p">,</span> <span class="s">"NAME HERE &lt;EMAIL ADDRESS&gt;"</span><span class="p">)</span>
 <span class="n">viper</span><span class="o">.</span><span class="n">SetDefault</span><span class="p">(</span><span class="s">"license"</span><span class="p">,</span> <span class="s">"apache"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="create-your-maingo">Create your main.go</h3>

<p>With the root command you need to have your main function execute it.
Execute should be run on the root for clarity, though it can be called on any command.</p>

<p>In a Cobra app, typically the main.go file is very bare. It serves, one purpose, to initialize Cobra.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
 <span class="s">"fmt"</span>
 <span class="s">"os"</span>

 <span class="s">"{pathToYourApp}/cmd"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">cmd</span><span class="o">.</span><span class="n">RootCmd</span><span class="o">.</span><span class="n">Execute</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="n">os</span><span class="o">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="create-additional-commands">Create additional commands</h3>

<p>Additional commands can be defined and typically are each given their own file
inside of the cmd/ directory.</p>

<p>If you wanted to create a version command you would create cmd/version.go and
populate it with the following:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">cmd</span>

<span class="k">import</span> <span class="p">(</span>
 <span class="s">"github.com/spf13/cobra"</span>
 <span class="s">"fmt"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
 <span class="n">RootCmd</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">versionCmd</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">var</span> <span class="n">versionCmd</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
 <span class="n">Use</span><span class="o">:</span>   <span class="s">"version"</span><span class="p">,</span>
 <span class="n">Short</span><span class="o">:</span> <span class="s">"Print the version number of Hugo"</span><span class="p">,</span>
 <span class="n">Long</span><span class="o">:</span>  <span class="s">`All software has versions. This is Hugo's`</span><span class="p">,</span>
 <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Hugo Static Site Generator v0.9 -- HEAD"</span><span class="p">)</span>
 <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="attach-command-to-its-parent">Attach command to its parent</h3>

<p>If you notice in the above example we attach the command to its parent. In
this case the parent is the rootCmd. In this example we are attaching it to the
root, but commands can be attached at any level.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">RootCmd</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">versionCmd</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="remove-a-command-from-its-parent">Remove a command from its parent</h3>

<p>Removing a command is not a common action in simple programs, but it allows 3rd
parties to customize an existing command tree.</p>

<p>In this example, we remove the existing <code class="language-plaintext highlighter-rouge">VersionCmd</code> command of an existing
root command, and we replace it with our own version:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mainlib</span><span class="o">.</span><span class="n">RootCmd</span><span class="o">.</span><span class="n">RemoveCommand</span><span class="p">(</span><span class="n">mainlib</span><span class="o">.</span><span class="n">VersionCmd</span><span class="p">)</span>
<span class="n">mainlib</span><span class="o">.</span><span class="n">RootCmd</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">versionCmd</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="working-with-flags">Working with Flags</h2>

<p>Flags provide modifiers to control how the action command operates.</p>

<h3 id="assign-flags-to-a-command">Assign flags to a command</h3>

<p>Since the flags are defined and used in different locations, we need to
define a variable outside with the correct scope to assign the flag to
work with.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">var</span> <span class="n">Verbose</span> <span class="kt">bool</span>
<span class="k">var</span> <span class="n">Source</span> <span class="kt">string</span>
</code></pre></div></div>

<p>There are two different approaches to assign a flag.</p>

<h3 id="persistent-flags">Persistent Flags</h3>

<p>A flag can be ‘persistent’ meaning that this flag will be available to the
command it’s assigned to as well as every command under that command. For
global flags, assign a flag as a persistent flag on the root.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">RootCmd</span><span class="o">.</span><span class="n">PersistentFlags</span><span class="p">()</span><span class="o">.</span><span class="n">BoolVarP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Verbose</span><span class="p">,</span> <span class="s">"verbose"</span><span class="p">,</span> <span class="s">"v"</span><span class="p">,</span> <span class="no">false</span><span class="p">,</span> <span class="s">"verbose output"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="local-flags">Local Flags</h3>

<p>A flag can also be assigned locally which will only apply to that specific command.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">RootCmd</span><span class="o">.</span><span class="n">Flags</span><span class="p">()</span><span class="o">.</span><span class="n">StringVarP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Source</span><span class="p">,</span> <span class="s">"source"</span><span class="p">,</span> <span class="s">"s"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="s">"Source directory to read from"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="example">Example</h2>

<p>In the example below, we have defined three commands. Two are at the top level
and one (cmdTimes) is a child of one of the top commands. In this case the root
is not executable meaning that a subcommand is required. This is accomplished
by not providing a ‘Run’ for the ‘rootCmd’.</p>

<p>We have only defined one flag for a single command.</p>

<p>More documentation about flags is available at <a href="https://github.com/spf13/pflag">https://github.com/spf13/pflag</a></p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
 <span class="s">"fmt"</span>
 <span class="s">"strings"</span>

 <span class="s">"github.com/spf13/cobra"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

 <span class="k">var</span> <span class="n">echoTimes</span> <span class="kt">int</span>

 <span class="k">var</span> <span class="n">cmdPrint</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
  <span class="n">Use</span><span class="o">:</span>   <span class="s">"print [string to print]"</span><span class="p">,</span>
  <span class="n">Short</span><span class="o">:</span> <span class="s">"Print anything to the screen"</span><span class="p">,</span>
  <span class="n">Long</span><span class="o">:</span> <span class="s">`print is for printing anything back to the screen.
            For many years people have printed back to the screen.
            `</span><span class="p">,</span>
  <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Print: "</span> <span class="o">+</span> <span class="n">strings</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">" "</span><span class="p">))</span>
  <span class="p">},</span>
 <span class="p">}</span>

 <span class="k">var</span> <span class="n">cmdEcho</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
  <span class="n">Use</span><span class="o">:</span>   <span class="s">"echo [string to echo]"</span><span class="p">,</span>
  <span class="n">Short</span><span class="o">:</span> <span class="s">"Echo anything to the screen"</span><span class="p">,</span>
  <span class="n">Long</span><span class="o">:</span> <span class="s">`echo is for echoing anything back.
            Echo works a lot like print, except it has a child command.
            `</span><span class="p">,</span>
  <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Print: "</span> <span class="o">+</span> <span class="n">strings</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">" "</span><span class="p">))</span>
  <span class="p">},</span>
 <span class="p">}</span>

 <span class="k">var</span> <span class="n">cmdTimes</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
  <span class="n">Use</span><span class="o">:</span>   <span class="s">"times [# times] [string to echo]"</span><span class="p">,</span>
  <span class="n">Short</span><span class="o">:</span> <span class="s">"Echo anything to the screen more times"</span><span class="p">,</span>
  <span class="n">Long</span><span class="o">:</span> <span class="s">`echo things multiple times back to the user by providing
            a count and a string.`</span><span class="p">,</span>
  <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">echoTimes</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Echo: "</span> <span class="o">+</span> <span class="n">strings</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s">" "</span><span class="p">))</span>
   <span class="p">}</span>
  <span class="p">},</span>
 <span class="p">}</span>

 <span class="n">cmdTimes</span><span class="o">.</span><span class="n">Flags</span><span class="p">()</span><span class="o">.</span><span class="n">IntVarP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">echoTimes</span><span class="p">,</span> <span class="s">"times"</span><span class="p">,</span> <span class="s">"t"</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="s">"times to echo the input"</span><span class="p">)</span>

 <span class="k">var</span> <span class="n">rootCmd</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span><span class="n">Use</span><span class="o">:</span> <span class="s">"app"</span><span class="p">}</span>
 <span class="n">rootCmd</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">cmdPrint</span><span class="p">,</span> <span class="n">cmdEcho</span><span class="p">)</span>
 <span class="n">cmdEcho</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">cmdTimes</span><span class="p">)</span>
 <span class="n">rootCmd</span><span class="o">.</span><span class="n">Execute</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<p>For a more complete example of a larger application, please checkout <a href="http://gohugo.io/">Hugo</a>.</p>

<h2 id="the-help-command">The Help Command</h2>

<p>Cobra automatically adds a help command to your application when you have subcommands.
This will be called when a user runs ‘app help’. Additionally, help will also
support all other commands as input. Say, for instance, you have a command called
‘create’ without any additional configuration; Cobra will work when ‘app help
create’ is called.  Every command will automatically have the ‘–help’ flag added.</p>

<h3 id="example-1">Example</h3>

<p>The following output is automatically generated by Cobra. Nothing beyond the
command and flag definitions are needed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; hugo help

hugo is the main command, used to build your Hugo site.

Hugo is a Fast and Flexible Static Site Generator
built with love by spf13 and friends in Go.

Complete documentation is available at http://gohugo.io/.

Usage:
  hugo [flags]
  hugo [command]

Available Commands:
  server          Hugo runs its own webserver to render the files
  version         Print the version number of Hugo
  config          Print the site configuration
  check           Check content in the source directory
  benchmark       Benchmark hugo by building a site a number of times.
  convert         Convert your content to different formats
  new             Create new content for your site
  list            Listing out various types of content
  undraft         Undraft changes the content's draft status from 'True' to 'False'
  genautocomplete Generate shell autocompletion script for Hugo
  gendoc          Generate Markdown documentation for the Hugo CLI.
  genman          Generate man page for Hugo
  import          Import your site from others.

Flags:
  -b, --baseURL="": hostname (and path) to the root, e.g. http://spf13.com/
  -D, --buildDrafts[=false]: include content marked as draft
  -F, --buildFuture[=false]: include content with publishdate in the future
      --cacheDir="": filesystem path to cache directory. Defaults: $TMPDIR/hugo_cache/
      --canonifyURLs[=false]: if true, all relative URLs will be canonicalized using baseURL
      --config="": config file (default is path/config.yaml|json|toml)
  -d, --destination="": filesystem path to write files to
      --disableRSS[=false]: Do not build RSS files
      --disableSitemap[=false]: Do not build Sitemap file
      --editor="": edit new content with this editor, if provided
      --ignoreCache[=false]: Ignores the cache directory for reading but still writes to it
      --log[=false]: Enable Logging
      --logFile="": Log File path (if set, logging enabled automatically)
      --noTimes[=false]: Don't sync modification time of files
      --pluralizeListTitles[=true]: Pluralize titles in lists using inflect
      --preserveTaxonomyNames[=false]: Preserve taxonomy names as written ("Gérard Depardieu" vs "gerard-depardieu")
  -s, --source="": filesystem path to read files relative from
      --stepAnalysis[=false]: display memory and timing of different steps of the program
  -t, --theme="": theme to use (located in /themes/THEMENAME/)
      --uglyURLs[=false]: if true, use /filename.html instead of /filename/
  -v, --verbose[=false]: verbose output
      --verboseLog[=false]: verbose logging
  -w, --watch[=false]: watch filesystem for changes and recreate as needed

Use "hugo [command] --help" for more information about a command.
</code></pre></div></div>

<p>Help is just a command like any other. There is no special logic or behavior
around it. In fact, you can provide your own if you want.</p>

<h3 id="defining-your-own-help">Defining your own help</h3>

<p>You can provide your own Help command or your own template for the default command to use.</p>

<p>The default help command is</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">Command</span><span class="p">)</span> <span class="n">initHelp</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">helpCommand</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
  <span class="n">c</span><span class="o">.</span><span class="n">helpCommand</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">Command</span><span class="p">{</span>
   <span class="n">Use</span><span class="o">:</span>   <span class="s">"help [command]"</span><span class="p">,</span>
   <span class="n">Short</span><span class="o">:</span> <span class="s">"Help about any command"</span><span class="p">,</span>
   <span class="n">Long</span><span class="o">:</span> <span class="s">`Help provides help for any command in the application.
        Simply type `</span> <span class="o">+</span> <span class="n">c</span><span class="o">.</span><span class="n">Name</span><span class="p">()</span> <span class="o">+</span> <span class="s">` help [path to command] for full details.`</span><span class="p">,</span>
   <span class="n">Run</span><span class="o">:</span> <span class="n">c</span><span class="o">.</span><span class="n">HelpFunc</span><span class="p">(),</span>
  <span class="p">}</span>
 <span class="p">}</span>
 <span class="n">c</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">helpCommand</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can provide your own command, function or template through the following methods:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">command</span><span class="o">.</span><span class="n">SetHelpCommand</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">Command</span><span class="p">)</span>

<span class="n">command</span><span class="o">.</span><span class="n">SetHelpFunc</span><span class="p">(</span><span class="n">f</span> <span class="k">func</span><span class="p">(</span><span class="o">*</span><span class="n">Command</span><span class="p">,</span> <span class="p">[]</span><span class="kt">string</span><span class="p">))</span>

<span class="n">command</span><span class="o">.</span><span class="n">SetHelpTemplate</span><span class="p">(</span><span class="n">s</span> <span class="kt">string</span><span class="p">)</span>
</code></pre></div></div>

<p>The latter two will also apply to any children commands.</p>

<h2 id="usage-1">Usage</h2>

<p>When the user provides an invalid flag or invalid command, Cobra responds by
showing the user the ‘usage’.</p>

<h3 id="example-2">Example</h3>

<p>You may recognize this from the help above. That’s because the default help
embeds the usage as part of its output.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Usage:
  hugo [flags]
  hugo [command]

Available Commands:
  server          Hugo runs its own webserver to render the files
  version         Print the version number of Hugo
  config          Print the site configuration
  check           Check content in the source directory
  benchmark       Benchmark hugo by building a site a number of times.
  convert         Convert your content to different formats
  new             Create new content for your site
  list            Listing out various types of content
  undraft         Undraft changes the content's draft status from 'True' to 'False'
  genautocomplete Generate shell autocompletion script for Hugo
  gendoc          Generate Markdown documentation for the Hugo CLI.
  genman          Generate man page for Hugo
  import          Import your site from others.

Flags:
  -b, --baseURL="": hostname (and path) to the root, e.g. http://spf13.com/
  -D, --buildDrafts[=false]: include content marked as draft
  -F, --buildFuture[=false]: include content with publishdate in the future
      --cacheDir="": filesystem path to cache directory. Defaults: $TMPDIR/hugo_cache/
      --canonifyURLs[=false]: if true, all relative URLs will be canonicalized using baseURL
      --config="": config file (default is path/config.yaml|json|toml)
  -d, --destination="": filesystem path to write files to
      --disableRSS[=false]: Do not build RSS files
      --disableSitemap[=false]: Do not build Sitemap file
      --editor="": edit new content with this editor, if provided
      --ignoreCache[=false]: Ignores the cache directory for reading but still writes to it
      --log[=false]: Enable Logging
      --logFile="": Log File path (if set, logging enabled automatically)
      --noTimes[=false]: Don't sync modification time of files
      --pluralizeListTitles[=true]: Pluralize titles in lists using inflect
      --preserveTaxonomyNames[=false]: Preserve taxonomy names as written ("Gérard Depardieu" vs "gerard-depardieu")
  -s, --source="": filesystem path to read files relative from
      --stepAnalysis[=false]: display memory and timing of different steps of the program
  -t, --theme="": theme to use (located in /themes/THEMENAME/)
      --uglyURLs[=false]: if true, use /filename.html instead of /filename/
  -v, --verbose[=false]: verbose output
      --verboseLog[=false]: verbose logging
  -w, --watch[=false]: watch filesystem for changes and recreate as needed
</code></pre></div></div>

<h3 id="defining-your-own-usage">Defining your own usage</h3>

<p>You can provide your own usage function or template for Cobra to use.</p>

<p>The default usage function is:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="k">func</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="n">Command</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
 <span class="n">err</span> <span class="o">:=</span> <span class="n">tmpl</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">Out</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">UsageTemplate</span><span class="p">(),</span> <span class="n">c</span><span class="p">)</span>
 <span class="k">return</span> <span class="n">err</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Like help, the function and template are overridable through public methods:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">command</span><span class="o">.</span><span class="n">SetUsageFunc</span><span class="p">(</span><span class="n">f</span> <span class="k">func</span><span class="p">(</span><span class="o">*</span><span class="n">Command</span><span class="p">)</span> <span class="kt">error</span><span class="p">)</span>

<span class="n">command</span><span class="o">.</span><span class="n">SetUsageTemplate</span><span class="p">(</span><span class="n">s</span> <span class="kt">string</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="prerun-or-postrun-hooks">PreRun or PostRun Hooks</h2>

<p>It is possible to run functions before or after the main <code class="language-plaintext highlighter-rouge">Run</code> function of your command. The <code class="language-plaintext highlighter-rouge">PersistentPreRun</code> and <code class="language-plaintext highlighter-rouge">PreRun</code> functions will be executed before <code class="language-plaintext highlighter-rouge">Run</code>. <code class="language-plaintext highlighter-rouge">PersistentPostRun</code> and <code class="language-plaintext highlighter-rouge">PostRun</code> will be executed after <code class="language-plaintext highlighter-rouge">Run</code>.  The <code class="language-plaintext highlighter-rouge">Persistent*Run</code> functions will be inherited by children if they do not declare their own.  These functions are run in the following order:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PersistentPreRun</code></li>
  <li><code class="language-plaintext highlighter-rouge">PreRun</code></li>
  <li><code class="language-plaintext highlighter-rouge">Run</code></li>
  <li><code class="language-plaintext highlighter-rouge">PostRun</code></li>
  <li><code class="language-plaintext highlighter-rouge">PersistentPostRun</code></li>
</ul>

<p>An example of two commands which use all of these features is below.  When the subcommand is executed, it will run the root command’s <code class="language-plaintext highlighter-rouge">PersistentPreRun</code> but not the root command’s <code class="language-plaintext highlighter-rouge">PersistentPostRun</code>:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
 <span class="s">"fmt"</span>

 <span class="s">"github.com/spf13/cobra"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

 <span class="k">var</span> <span class="n">rootCmd</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
  <span class="n">Use</span><span class="o">:</span>   <span class="s">"root [sub]"</span><span class="p">,</span>
  <span class="n">Short</span><span class="o">:</span> <span class="s">"My root command"</span><span class="p">,</span>
  <span class="n">PersistentPreRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside rootCmd PersistentPreRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">PreRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside rootCmd PreRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside rootCmd Run with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">PostRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside rootCmd PostRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">PersistentPostRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside rootCmd PersistentPostRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
 <span class="p">}</span>

 <span class="k">var</span> <span class="n">subCmd</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
  <span class="n">Use</span><span class="o">:</span>   <span class="s">"sub [no options!]"</span><span class="p">,</span>
  <span class="n">Short</span><span class="o">:</span> <span class="s">"My subcommand"</span><span class="p">,</span>
  <span class="n">PreRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside subCmd PreRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">Run</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside subCmd Run with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">PostRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside subCmd PostRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="n">PersistentPostRun</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Inside subCmd PersistentPostRun with args: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">},</span>
 <span class="p">}</span>

 <span class="n">rootCmd</span><span class="o">.</span><span class="n">AddCommand</span><span class="p">(</span><span class="n">subCmd</span><span class="p">)</span>

 <span class="n">rootCmd</span><span class="o">.</span><span class="n">SetArgs</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">""</span><span class="p">})</span>
 <span class="n">_</span> <span class="o">=</span> <span class="n">rootCmd</span><span class="o">.</span><span class="n">Execute</span><span class="p">()</span>
 <span class="n">fmt</span><span class="o">.</span><span class="n">Print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
 <span class="n">rootCmd</span><span class="o">.</span><span class="n">SetArgs</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">"sub"</span><span class="p">,</span> <span class="s">"arg1"</span><span class="p">,</span> <span class="s">"arg2"</span><span class="p">})</span>
 <span class="n">_</span> <span class="o">=</span> <span class="n">rootCmd</span><span class="o">.</span><span class="n">Execute</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="alternative-error-handling">Alternative Error Handling</h2>

<p>Cobra also has functions where the return signature is an error. This allows for errors to bubble up to the top,
providing a way to handle the errors in one location. The current list of functions that return an error is:</p>

<ul>
  <li>PersistentPreRunE</li>
  <li>PreRunE</li>
  <li>RunE</li>
  <li>PostRunE</li>
  <li>PersistentPostRunE</li>
</ul>

<p>If you would like to silence the default <code class="language-plaintext highlighter-rouge">error</code> and <code class="language-plaintext highlighter-rouge">usage</code> output in favor of your own, you can set <code class="language-plaintext highlighter-rouge">SilenceUsage</code>
and <code class="language-plaintext highlighter-rouge">SilenceErrors</code> to <code class="language-plaintext highlighter-rouge">true</code> on the command. A child command respects these flags if they are set on the parent
command.</p>

<p><strong>Example Usage using RunE:</strong></p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
 <span class="s">"errors"</span>
 <span class="s">"log"</span>

 <span class="s">"github.com/spf13/cobra"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
 <span class="k">var</span> <span class="n">rootCmd</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">{</span>
  <span class="n">Use</span><span class="o">:</span>   <span class="s">"hugo"</span><span class="p">,</span>
  <span class="n">Short</span><span class="o">:</span> <span class="s">"Hugo is a very fast static site generator"</span><span class="p">,</span>
  <span class="n">Long</span><span class="o">:</span> <span class="s">`A Fast and Flexible Static Site Generator built with
                love by spf13 and friends in Go.
                Complete documentation is available at http://hugo.spf13.com`</span><span class="p">,</span>
  <span class="n">RunE</span><span class="o">:</span> <span class="k">func</span><span class="p">(</span><span class="n">cmd</span> <span class="o">*</span><span class="n">cobra</span><span class="o">.</span><span class="n">Command</span><span class="p">,</span> <span class="n">args</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
   <span class="c">// Do Stuff Here</span>
   <span class="k">return</span> <span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"some random error"</span><span class="p">)</span>
  <span class="p">},</span>
 <span class="p">}</span>

 <span class="k">if</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rootCmd</span><span class="o">.</span><span class="n">Execute</span><span class="p">();</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
  <span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="suggestions-when-unknown-command-happens">Suggestions when “unknown command” happens</h2>

<p>Cobra will print automatic suggestions when “unknown command” errors happen. This allows Cobra to behave similarly to the <code class="language-plaintext highlighter-rouge">git</code> command when a typo happens. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ hugo srever
Error: unknown command "srever" for "hugo"

Did you mean this?
        server

Run 'hugo --help' for usage.
</code></pre></div></div>

<p>Suggestions are automatic based on every subcommand registered and use an implementation of <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a>. Every registered command that matches a minimum distance of 2 (ignoring case) will be displayed as a suggestion.</p>

<p>If you need to disable suggestions or tweak the string distance in your command, use:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">command</span><span class="o">.</span><span class="n">DisableSuggestions</span> <span class="o">=</span> <span class="no">true</span>
</code></pre></div></div>

<p>or</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">command</span><span class="o">.</span><span class="n">SuggestionsMinimumDistance</span> <span class="o">=</span> <span class="m">1</span>
</code></pre></div></div>

<p>You can also explicitly set names for which a given command will be suggested using the <code class="language-plaintext highlighter-rouge">SuggestFor</code> attribute. This allows suggestions for strings that are not close in terms of string distance, but makes sense in your set of commands and for some which you don’t want aliases. Example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl remove
Error: unknown command "remove" for "kubectl"

Did you mean this?
        delete

Run 'kubectl help' for usage.
</code></pre></div></div>

<h2 id="generating-markdown-formatted-documentation-for-your-command">Generating Markdown-formatted documentation for your command</h2>

<p>Cobra can generate a Markdown-formatted document based on the subcommands, flags, etc. A simple example of how to do this for your command can be found in.</p>

<h2 id="generating-man-pages-for-your-command">Generating man pages for your command</h2>

<p>Cobra can generate a man page based on the subcommands, flags, etc. A simple example of how to do this for your command can be found in .</p>

<h2 id="generating-bash-completions-for-your-command">Generating bash completions for your command</h2>

<p>Cobra can generate a bash-completion file. If you add more information to your command, these completions can be amazingly powerful and flexible.  Read more about it in.</p>

<h2 id="debugging">Debugging</h2>

<p>Cobra provides a ‘DebugFlags’ method on a command which, when called, will print
out everything Cobra knows about the flags for each command.</p>

<h3 id="example-3">Example</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">command</span><span class="o">.</span><span class="n">DebugFlags</span><span class="p">()</span>
</code></pre></div></div>

<h2 id="release-notes">Release Notes</h2>

<ul>
  <li><strong>0.9.0</strong> June 17, 2014
    <ul>
      <li>flags can appears anywhere in the args (provided they are unambiguous)</li>
      <li>–help prints usage screen for app or command</li>
      <li>Prefix matching for commands</li>
      <li>Cleaner looking help and usage output</li>
      <li>Extensive test suite</li>
    </ul>
  </li>
  <li><strong>0.8.0</strong> Nov 5, 2013
    <ul>
      <li>Reworked interface to remove commander completely</li>
      <li>Command now primary structure</li>
      <li>No initialization needed</li>
      <li>Usage &amp; Help templates &amp; functions definable at any level</li>
      <li>Updated Readme</li>
    </ul>
  </li>
  <li><strong>0.7.0</strong> Sept 24, 2013
    <ul>
      <li>Needs more eyes</li>
      <li>Test suite</li>
      <li>Support for automatic error messages</li>
      <li>Support for help command</li>
      <li>Support for printing to any io.Writer instead of os.Stderr</li>
      <li>Support for persistent flags which cascade down tree</li>
      <li>Ready for integration into Hugo</li>
    </ul>
  </li>
  <li><strong>0.1.0</strong> Sept 3, 2013
    <ul>
      <li>Implement first draft</li>
    </ul>
  </li>
</ul>

<h2 id="extensions">Extensions</h2>

<p>Libraries for extending Cobra:</p>

<ul>
  <li><a href="https://github.com/gosuri/cmdns">cmdns</a>: Enables name spacing a command’s immediate children. It provides an alternative way to structure subcommands, similar to <code class="language-plaintext highlighter-rouge">heroku apps:create</code> and <code class="language-plaintext highlighter-rouge">ovrclk clusters:launch</code>.</li>
</ul>

<h2 id="todo">ToDo</h2>

<ul>
  <li>Launch proper documentation site</li>
</ul>

<h2 id="contributing">Contributing</h2>

<ol>
  <li>Fork it</li>
  <li>Create your feature branch (<code class="language-plaintext highlighter-rouge">git checkout -b my-new-feature</code>)</li>
  <li>Commit your changes (<code class="language-plaintext highlighter-rouge">git commit -am 'Add some feature'</code>)</li>
  <li>Push to the branch (<code class="language-plaintext highlighter-rouge">git push origin my-new-feature</code>)</li>
  <li>Create new Pull Request</li>
</ol>

<h2 id="contributors">Contributors</h2>

<p>Names in no particular order:</p>

<ul>
  <li><a href="https://github.com/spf13">spf13</a>,
<a href="https://github.com/eparis">eparis</a>,
<a href="https://github.com/bep">bep</a>, and many more!</li>
</ul>

<h2 id="license">License</h2>

<p>Cobra is released under the Apache 2.0 license. See <a href="https://github.com/spf13/cobra/blob/master/LICENSE.txt">LICENSE.txt</a></p>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/spf13/cobra/trend.png" alt="Bitdeli Badge" /></a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
